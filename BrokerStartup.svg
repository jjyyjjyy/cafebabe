<?xml version='1.0' encoding='US-ASCII' standalone='no'?><svg contentStyleType='text/css' height='743px' preserveAspectRatio='none' style='width:1675px;height:743px;background:#FFFFFF;' version='1.1' viewBox='0 0 1675 743' width='1675px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><text fill='#000000' font-family='sans-serif' font-size='14' font-weight='bold' lengthAdjust='spacing' textLength='408' x='634.75' y='28.5352'>&#21551;&#21160;&#20837;&#21475;: org.apache.rocketmq.broker.BrokerStartup#main</text><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='463' x2='463' y1='73.9766' y2='707.7402'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='798' x2='798' y1='73.9766' y2='707.7402'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='952' x2='952' y1='73.9766' y2='707.7402'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='1101' x2='1101' y1='73.9766' y2='707.7402'/><line style='stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;' x1='1272' x2='1272' y1='73.9766' y2='707.7402'/><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='109' x='409' y='42.4883'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='95' x='416' y='63.0234'>BrokerStartup</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='109' x='409' y='706.7402'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='95' x='416' y='727.2754'>BrokerStartup</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='129' x='734' y='42.4883'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='115' x='741' y='63.0234'>BrokerController</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='129' x='734' y='706.7402'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='115' x='741' y='727.2754'>BrokerController</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='158' x='873' y='42.4883'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='144' x='880' y='63.0234'>NettyRemotingServer</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='158' x='873' y='706.7402'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='144' x='880' y='727.2754'>NettyRemotingServer</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='120' x='1041' y='42.4883'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='106' x='1048' y='63.0234'>BrokerOuterAPI</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='120' x='1041' y='706.7402'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='106' x='1048' y='727.2754'>BrokerOuterAPI</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='203' x='1171' y='42.4883'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='189' x='1178' y='63.0234'>namesrv:RouteInfoManager</text><rect fill='#E2E2F0' height='30.4883' rx='2.5' ry='2.5' style='stroke:#181818;stroke-width:0.5;' width='203' x='1171' y='706.7402'/><text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacing' textLength='189' x='1178' y='727.2754'>namesrv:RouteInfoManager</text><line style='stroke:#181818;stroke-width:1.0;' x1='463.5' x2='505.5' y1='140.0635' y2='140.0635'/><line style='stroke:#181818;stroke-width:1.0;' x1='505.5' x2='505.5' y1='140.0635' y2='153.0635'/><line style='stroke:#181818;stroke-width:1.0;' x1='464.5' x2='505.5' y1='153.0635' y2='153.0635'/><polygon fill='#181818' points='474.5,149.0635,464.5,153.0635,474.5,157.0635,470.5,153.0635' style='stroke:#181818;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='129' x='470.5' y='135.3213'>&#21019;&#24314;BrokerController</text><path d='M5,88.9766 L5,189.9766 L459,189.9766 L459,98.9766 L449,88.9766 L5,88.9766 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M449,88.9766 L449,98.9766 L459,98.9766 L449,88.9766 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='11' y='106.5449'>1.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='129' x='27' y='106.5449'>&#21152;&#36733;&#37197;&#32622;&#39033;, &#37197;&#32622;&#26469;&#28304;:</text><rect fill='#000000' height='3.5' style='stroke:#000000;stroke-width:0.0;' width='3.5' x='20' y='114.5977'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='158' x='27' y='121.8555'>--&lt;key&gt; &lt;value&gt; &#37197;&#32622;&#39033;</text><rect fill='#000000' height='3.5' style='stroke:#000000;stroke-width:0.0;' width='3.5' x='20' y='129.9082'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='93' x='27' y='137.166'>-c&#25351;&#23450;&#37197;&#32622;&#25991;&#20214;</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='11' y='152.4766'>2.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='126' x='27' y='152.4766'>&#26657;&#39564;NameServer&#22320;&#22336;</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='11' y='167.7871'>3.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='178' x='27' y='167.7871'>&#26657;&#39564;&#20174;&#33410;&#28857;brokerId&#24517;&#39035;&#22823;&#20110;0</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='11' y='183.0977'>4.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='417' x='27' y='183.0977'>&#21152;&#36733;logback&#26085;&#24535;&#37197;&#32622;: ${rocketmqHome}/conf/logback_broker.xml</text><polygon fill='#181818' points='786.5,216.1504,796.5,220.1504,786.5,224.1504,790.5,220.1504' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='463.5' x2='792.5' y1='220.1504' y2='220.1504'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='54' x='470.5' y='215.4082'>initialize</text><path d='M803,200.8398 L803,225.8398 L1143,225.8398 L1143,210.8398 L1133,200.8398 L803,200.8398 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1133,200.8398 L1133,210.8398 L1143,210.8398 L1133,200.8398 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='809' y='218.4082'>1.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='303' x='825' y='218.4082'>&#20174;&#25991;&#20214;&#20013;&#24674;&#22797;Topic&#28040;&#24687;, &#35746;&#38405;&#20851;&#31995;&#21644;&#28040;&#36153;&#36827;&#24230;&#31561;&#20449;&#24687;</text><polygon fill='#181818' points='474.5,233.1504,464.5,237.1504,474.5,241.1504,470.5,237.1504' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='468.5' x2='797.5' y1='237.1504' y2='237.1504'/><line style='stroke:#181818;stroke-width:1.0;' x1='463.5' x2='505.5' y1='266.4609' y2='266.4609'/><line style='stroke:#181818;stroke-width:1.0;' x1='505.5' x2='505.5' y1='266.4609' y2='279.4609'/><line style='stroke:#181818;stroke-width:1.0;' x1='464.5' x2='505.5' y1='279.4609' y2='279.4609'/><polygon fill='#181818' points='474.5,275.4609,464.5,279.4609,474.5,283.4609,470.5,279.4609' style='stroke:#181818;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='321' x='470.5' y='261.7188'>&#27880;&#20876;shutdown&#22238;&#35843;, &#35843;&#29992;BrokerController#shutdown</text><polygon fill='#181818' points='786.5,304.7715,796.5,308.7715,786.5,312.7715,790.5,308.7715' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='463.5' x2='792.5' y1='308.7715' y2='308.7715'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='29' x='470.5' y='304.0293'>start</text><polygon fill='#181818' points='940,344.7373,950,348.7373,940,352.7373,944,348.7373' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='798.5' x2='946' y1='348.7373' y2='348.7373'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='29' x='805.5' y='343.9951'>start</text><path d='M957,321.7715 L957,361.7715 L1222,361.7715 L1222,331.7715 L1212,321.7715 L957,321.7715 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1212,321.7715 L1212,331.7715 L1222,331.7715 L1212,321.7715 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='963' y='339.3398'>1.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='113' x='979' y='339.3398'>&#21551;&#21160;messageStore</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='963' y='354.6504'>2.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='228' x='979' y='354.6504'>&#21551;&#21160;Netty&#26381;&#21153;&#31471;, &#25509;&#25910;&#22806;&#37096;&#35831;&#27714;&#24182;&#22788;&#29702;.</text><polygon fill='#181818' points='809.5,369.3926,799.5,373.3926,809.5,377.3926,805.5,373.3926' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='803.5' x2='951' y1='373.3926' y2='373.3926'/><line style='stroke:#181818;stroke-width:1.0;' x1='798.5' x2='840.5' y1='452.79' y2='452.79'/><line style='stroke:#181818;stroke-width:1.0;' x1='840.5' x2='840.5' y1='452.79' y2='465.79'/><line style='stroke:#181818;stroke-width:1.0;' x1='799.5' x2='840.5' y1='465.79' y2='465.79'/><polygon fill='#181818' points='809.5,461.79,799.5,465.79,809.5,469.79,805.5,465.79' style='stroke:#181818;stroke-width:1.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='105' x='805.5' y='448.0479'>registerBrokerAll</text><path d='M922,386.3926 L922,518.3926 L1668,518.3926 L1668,396.3926 L1658,386.3926 L922,386.3926 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1658,386.3926 L1658,396.3926 L1668,396.3926 L1658,386.3926 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='928' y='403.9609'>1.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='709' x='944' y='403.9609'>&#21551;&#21160;&#23450;&#26102;&#20219;&#21153;, &#27599;30&#31186;&#21521;NameServer&#19978;&#25253;&#24515;&#36339;. &#21487;&#36890;&#36807;registerNameServerPeriod&#37197;&#32622;&#19978;&#25253;&#38388;&#38548;, &#24517;&#39035;&#22312;10&#31186;~60&#31186;&#33539;&#22260;&#20869;.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='928' y='419.2715'>2.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='56' x='944' y='419.2715'>&#19978;&#25253;&#20869;&#23481;:</text><ellipse cx='933.5' cy='429.8242' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='67' x='940' y='434.582'>broker&#22320;&#22336;</text><ellipse cx='933.5' cy='445.1348' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='53' x='940' y='449.8926'>brokerId</text><ellipse cx='933.5' cy='460.4453' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='67' x='940' y='465.2031'>broker&#21517;&#31216;</text><ellipse cx='933.5' cy='475.7559' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='78' x='940' y='480.5137'>&#25152;&#23646;&#38598;&#32676;&#21517;&#31216;</text><ellipse cx='933.5' cy='491.0664' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='65' x='940' y='495.8242'>&#20027;&#33410;&#28857;&#22320;&#22336;</text><ellipse cx='933.5' cy='506.377' fill='#000000' rx='2.5' ry='2.5' style='stroke:#000000;stroke-width:0.0;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='78' x='940' y='511.1348'>&#20027;&#39064;&#37197;&#32622;&#25968;&#25454;</text><polygon fill='#181818' points='1089,544.1875,1099,548.1875,1089,552.1875,1093,548.1875' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='798.5' x2='1095' y1='548.1875' y2='548.1875'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='105' x='805.5' y='543.4453'>registerBrokerAll</text><path d='M1106,528.877 L1106,553.877 L1227,553.877 L1227,538.877 L1217,528.877 L1106,528.877 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1217,528.877 L1217,538.877 L1227,538.877 L1217,528.877 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='100' x='1112' y='546.4453'>&#36941;&#21382;NameServer</text><polygon fill='#181818' points='1260.5,610.1191,1270.5,614.1191,1260.5,618.1191,1264.5,614.1191' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='1101' x2='1266.5' y1='614.1191' y2='614.1191'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='124' x='1108' y='609.377'>registerBroker [103]</text><path d='M1277,564.1875 L1277,650.1875 L1648,650.1875 L1648,574.1875 L1638,564.1875 L1277,564.1875 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><path d='M1638,564.1875 L1638,574.1875 L1648,574.1875 L1638,564.1875 ' fill='#FEFFDD' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='1283' y='581.7559'>1.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='133' x='1299' y='581.7559'>&#26356;&#26032;clusterAddrTable</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='1283' y='597.0664'>2.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='310' x='1299' y='597.0664'>&#26356;&#26032;brokerAddrTable&#24403;&#21069;broker&#33410;&#28857;&#20449;&#24687;, &#20808;&#21024;&#21518;&#22686;</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='1283' y='612.377'>3.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='266' x='1299' y='612.377'>&#22914;&#26524;Topic&#37197;&#32622;&#21464;&#26356;, &#21017;&#26356;&#26032;topicQueueTable</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='1283' y='627.6875'>4.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='256' x='1299' y='627.6875'>&#26356;&#26032;brokerLiveTable&#20013;&#30340;&#26368;&#36817;&#19968;&#27425;&#24515;&#36339;&#26102;&#38388;</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='12' x='1283' y='642.998'>5.</text><text fill='#000000' font-family='sans-serif' font-size='13' lengthAdjust='spacing' textLength='334' x='1299' y='642.998'>&#22914;&#26524;&#24403;&#21069;&#19978;&#25253;&#30340;broker&#26159;&#20174;&#33410;&#28857;, &#21017;&#25214;&#20986;&#20027;&#33410;&#28857;ip&#36820;&#22238;&#20986;&#21435;</text><polygon fill='#181818' points='1112,657.7402,1102,661.7402,1112,665.7402,1108,661.7402' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='1106' x2='1271.5' y1='661.7402' y2='661.7402'/><polygon fill='#181818' points='809.5,671.7402,799.5,675.7402,809.5,679.7402,805.5,675.7402' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='803.5' x2='1100' y1='675.7402' y2='675.7402'/><polygon fill='#181818' points='474.5,685.7402,464.5,689.7402,474.5,693.7402,470.5,689.7402' style='stroke:#181818;stroke-width:1.0;'/><line style='stroke:#181818;stroke-width:1.0;' x1='468.5' x2='797.5' y1='689.7402' y2='689.7402'/></g></svg>